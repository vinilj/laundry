<div class="card" *ngIf="userType=='superAdmin'">
    <h5>Machine Management System</h5>
    <div class="float-right margin-3-0">
        <div class="row">
            <div class="col-md-1">&#X00A0;</div>
            <div class="col-md-4">
                <!-- <div class="input-group mb-3">
                    <button class="btn btn-light btn-lg"><span class="align-middle">Add Machine</span> <img
                            class="machinebuttonimg" src="../../../assets/img/addmachine.png"></button>
                </div>
                <div class="input-group mb-3">
                    <button class="btn btn-light btn-lg"><span class="align-middle">Delete Machine</span> <img
                            class="machinebuttonimg" src="../../../assets/img/removemachine.png"></button>
                </div> -->
            </div>
            <div class="col-md-7">
                <form [formGroup]="machine" (ngSubmit)="addmachines()">
                    <div class="row">
                        <div class="col-md-6">
                            <label>Machine Type</label>
                            <div class="input-group mb-3">
                                <select class="form-control" formControlName="machineType" required>
                                    <option value="null">Select Type</option>
                                    <option value="washer">Washer</option>
                                    <option value="dryer">Dryer</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label>Operation Type</label>
                            <div class="input-group mb-3">
                                <select class="form-control" formControlName="operationType" [(ngModel)]="deviceOperation" required>
                                    <option value="null">Select Type</option>
                                    <option value="drop off">Drop Off</option>
                                    <option value="self operated">Self
                                        Operated</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label>Machine Model Number</label>
                            <div class="input-group mb-3">
                                <input type="text" formControlName="modelNumber" class="border-solid-input full-width" aria-describedby="basic-addon1" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label>Franchise</label>
                            <!-- <div class="input-group mb-3">
                                <input type="number" formControlName="franchiseId" class="border-solid-input full-width" aria-describedby="basic-addon1">
                            </div> -->
                            <div class="input-group mb-3">
                                <select class="form-control" formControlName="franchiseId" required>
                                <option value="0">Select Franchise</option>
                                    <option *ngFor="let franchises of allFranchises" value="{{franchises.id}}">{{franchises.name}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="deviceOperation!='drop off'">
                            <label>Machine Price</label>
                            <div class="input-group mb-3">
                                <input type="number" formControlName="charges" class="border-solid-input full-width" aria-describedby="basic-addon1" required>
                            </div>
                        </div>
                        <div class="col-md-6" *ngIf="deviceOperation!='drop off'">
                            <label>Bluetooth Address</label>
                            <div class="input-group mb-3">
                                <input type="text" formControlName="btAddress" class="border-solid-input full-width" aria-describedby="basic-addon1" required>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="float-right">
                                <button type="submit" class="btn btn-primary">ADD</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-10 margin-3-0 periodicdata">
                <div class="float-right">
                    <mat-form-field *ngIf="userType =='FranchiseAdmin' ">
                        <mat-label>Select Franchise</mat-label>
                        <mat-select>
                            <mat-option [value]="0" (click)="selectFranchise(0)">
                                All
                            </mat-option>
                            <mat-option *ngFor="let franchises of allFranchises" [value]="franchises.id" (click)="selectFranchise(franchises.id)">
                                {{franchises.name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div class="col-md-2 margin-3-0 periodicdata">
                <div class="float-right">
                    <label (click)="updateList()">Updated Just Now
                            <button class="btn maticon"><i class="material-icons">autorenew</i></button>
                        </label>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
        <!-- Position Column -->
        <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox></mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let element">
                <mat-checkbox></mat-checkbox>
            </td>
        </ng-container>
        <!-- Weight Column -->
        <ng-container matColumnDef="franchise" *ngIf="userType !='FranchiseAdmin'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Franchise Name </th>
            <td mat-cell *matCellDef="let element"> {{element.franchise.name | titlecase}} </td>
            <!-- <p *matCellDef="let element"> {{"element.phone"}} </p> -->
        </ng-container>
        <ng-container matColumnDef="franchise" *ngIf="userType =='FranchiseAdmin' && franchise">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Franchise Name </th>
            <td mat-cell *matCellDef="let element"> {{franchise.name | titlecase}} </td>
            <!-- <p *matCellDef="let element"> {{"element.phone"}} </p> -->
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="btAddress" *ngIf="userType !='FranchiseAdmin'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Bluetooth Address </th>
            <td mat-cell *matCellDef="let element"> {{element.btAddress}} </td>
        </ng-container>
        <ng-container matColumnDef="btAddress" *ngIf="userType =='FranchiseAdmin' && franchise">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Bluetooth Address </th>
            <td mat-cell *matCellDef="let element"> {{franchise.btAddress}} </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="table-left-text"> Machine Id </th>
            <td mat-cell *matCellDef="let element" class="table-left-text"> {{element.id}} </td>
        </ng-container>


        <ng-container matColumnDef="machineType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Machine Type </th>
            <td mat-cell *matCellDef="let element"> {{element.machineType | titlecase}} </td>
        </ng-container>
        <ng-container matColumnDef="operationType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Operation Type </th>
            <td mat-cell *matCellDef="let element"> {{element.operationType | titlecase}} </td>
        </ng-container>
        <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Price </th>
            <td mat-cell *matCellDef="let element"> {{element.charges}} <span>INR</span></td>

        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="machineStatus">
            <th mat-header-cell *matHeaderCellDef> Machine status </th>
            <td mat-cell *matCellDef="let element">
                <button type="button" class="btn" [ngClass]="{'btn-outline-success': element.status=='active','btn-outline-danger': element.status=='inactive'}" value="element.status" (click)="updateMachineStatus(element.status, element.id)" matTooltipPosition="right"
                    matTooltip="Update status of machine">{{element.status | titlecase}}</button>
            </td>
        </ng-container>
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let element">
                <button *ngIf="userType !='FranchiseAdmin'" type="button" class="btn btn-danger" (click)="deleteMachine(element.id)" matTooltipPosition="right" matTooltip="Want to Delete">Delete</button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]">
    </mat-paginator>
    <!-- <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator> -->
    <div class="row margin-2-0">
        <div class="col-12">
            <div class="float-right">
                <button class="btn btn-primary" (click)="exportData()">Export</button>
            </div>
        </div>
    </div>
</div>