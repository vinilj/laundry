{"version":3,"sources":["./src/app/registration/otp/otp.page.html","./src/app/registration/otp/otp-routing.module.ts","./src/app/registration/otp/otp.module.ts","./src/app/registration/otp/otp.page.scss","./src/app/registration/otp/otp.page.ts"],"names":[],"mappings":"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","file":"registration-otp-otp-module-es2015.js","sourcesContent":["export default \"<ion-content>\\n  <ion-grid class=\\\"input-position\\\">\\n    <ion-row>\\n      <ion-col>\\n        <h2>OTP Verfication</h2>\\n        <h5 class=\\\"color-gray thin-font ion-no-margin\\\">Enter the OTP sent to +91 {{phoneNumber}}</h5>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col class=\\\"partitioned\\\">\\n        <ion-input #otp1 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp2,'otp')\\\">\\n        </ion-input>\\n        <ion-input #otp2 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp3,otp1)\\\">\\n        </ion-input>\\n        <ion-input #otp3 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp4,otp2)\\\">\\n        </ion-input>\\n        <ion-input #otp4 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,'otp',otp3)\\\">\\n        </ion-input>\\n      </ion-col>\\n    </ion-row>\\n    <ion-button expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"submit()\\\">Submit</ion-button>\\n    <h5 class=\\\"color-gray thin-font text-right\\\">Didn't get OTP ?\\n      <strong class=\\\"primary-color\\\" (click)=\\\"resendOtp()\\\">Resend OTP</strong>\\n      <ion-ripple-effect></ion-ripple-effect>\\n    </h5>\\n\\n\\n  </ion-grid>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OtpPage } from './otp.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OtpPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OtpPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OtpPageRoutingModule } from './otp-routing.module';\n\nimport { OtpPage } from './otp.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OtpPageRoutingModule,\n  ],\n  declarations: [OtpPage]\n})\nexport class OtpPageModule {}\n","export default \".partitioned ion-input {\\n  display: inline-block;\\n  width: 18%;\\n  margin: 1em 3%;\\n  border: 1px solid #787878;\\n  box-sizing: border-box;\\n  border-radius: 5px;\\n  text-align: center;\\n  padding-right: 8px !important;\\n  --padding-top: 12px;\\n  --padding-bottom: 12px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0cmF0aW9uL290cC9EOlxcUHJvamVjdHNcXGxhdW5kcnlcXGFwcC9zcmNcXGFwcFxccmVnaXN0cmF0aW9uXFxvdHBcXG90cC5wYWdlLnNjc3MiLCJzcmMvYXBwL3JlZ2lzdHJhdGlvbi9vdHAvb3RwLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLHFCQUFBO0VBQ0EsVUFBQTtFQUNBLGNBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLDZCQUFBO0VBQ0EsbUJBQUE7RUFDQSxzQkFBQTtBQ0FKIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0cmF0aW9uL290cC9vdHAucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBhcnRpdGlvbmVkIHtcbiAgaW9uLWlucHV0IHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDE4JTtcbiAgICBtYXJnaW46IDFlbSAzJTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNzg3ODc4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nLXJpZ2h0OiA4cHggIWltcG9ydGFudDtcbiAgICAtLXBhZGRpbmctdG9wOiAxMnB4O1xuICAgIC0tcGFkZGluZy1ib3R0b206IDEycHg7XG4gIH1cbiBcbn1cbiIsIi5wYXJ0aXRpb25lZCBpb24taW5wdXQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiAxOCU7XG4gIG1hcmdpbjogMWVtIDMlO1xuICBib3JkZXI6IDFweCBzb2xpZCAjNzg3ODc4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZy1yaWdodDogOHB4ICFpbXBvcnRhbnQ7XG4gIC0tcGFkZGluZy10b3A6IDEycHg7XG4gIC0tcGFkZGluZy1ib3R0b206IDEycHg7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { UserapiService } from 'src/app/common/apilayer/APIs/userapi.service';\nimport { LocalStroageService } from 'src/app/common/service/localstorage/local-stroage.service';\nimport { HttpService } from 'src/app/common/apilayer/http-header/http.service';\nimport { ToastService } from 'src/app/common/service/toast/toast.service';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport * as jwt_decode from 'jwt-decode'\n\n@Component({\n  selector: 'app-otp',\n  templateUrl: './otp.page.html',\n  styleUrls: ['./otp.page.scss'],\n})\nexport class OtpPage implements OnInit {\n\n  otp: string = '';\n  phoneNumber: any;\n  user: any;\n\n\n\n\n  constructor(private navctrl: NavController, private toasterService: ToastService,\n    private route: ActivatedRoute, private router: Router,\n    private userService: UserapiService, private localStorage: LocalStroageService) {\n    this.route.queryParams.subscribe(params => {\n      console.log(params);\n\n      if (params && params.phoneNumber) {\n        this.phoneNumber = JSON.parse(params.phoneNumber);\n      }\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  submit() {\n\n    console.log(this.otp);\n\n    if (this.otp.length < 4)\n      this.toasterService.toastFail('Please enter the otp')\n    else\n      this.userService.userLogin({\n        mobile: String(this.phoneNumber),\n        otp: parseInt(this.otp)\n      })\n        .subscribe(res => {\n          if (res.userType == \"found\") {\n\n            this.localStorage.setStorageKey('authToken', res['token'])\n              .then(() => {\n                // if (jwt_decode(res['token'])['userType'] == 'user') {\n                //   this.navctrl.navigateForward('storelist')\n                //   console.log(jwt_decode(res['token'])['userType']);\n                // } else\n                this.navigateToLandingPage()\n\n              })\n\n          }\n          else if (res.userType == \"notfound\") {\n            let navigationExtras: NavigationExtras = {\n              queryParams: {\n                phoneNumber: this.phoneNumber\n              }\n            };\n            this.navctrl.navigateForward('userdetails', navigationExtras)\n          } else if (res.userType == \"storeoperator\") {\n            let navigationExtras: NavigationExtras = {\n              queryParams: {\n                phoneNumber: this.phoneNumber\n              }\n            };\n            this.navctrl.navigateForward('storelist', navigationExtras)\n          }\n\n        })\n\n\n  }\n  navigateToLandingPage() {\n    this.userService.getUserData()\n      .subscribe(res => {\n        // this.user = res\n        // console.log(res);\n        this.userService.getUserDataById(res.id)\n          .subscribe(res => {\n            this.user = res\n            this.localStorage.setStorageKey('user', res)\n              .then(() => {\n                if (res.userType == \"storeoperator\")\n                  this.navctrl.navigateForward('/storelist')\n                else\n                  this.navctrl.navigateForward('tabs/welcome')\n              })\n          })\n      })\n  }\n\n  resendOtp() {\n    this.otp = \"\"\n    this.userService.resendOTP({\n      mobile: String(this.phoneNumber),\n    }).subscribe(res => {\n      console.log(res);\n      this.toasterService.toastSuccess('Otp resent')\n    })\n  }\n  otpController(event, next, prev) {\n    console.log(event.target.value.length, \" next:\", next, \" prev:\", prev, \" otp:\", this.otp.length);\n\n    if (event.target.value.length < 1 && prev) {\n      if (this.otp.length == 0)\n        this.otp = \"\"\n      else if (this.otp.length == 1) {\n        this.otp = this.otp.substring(0, this.otp.length - 1);\n      }\n      else {\n        prev.setFocus()\n        this.otp = this.otp.substring(0, this.otp.length - 1);\n      }\n\n\n    }\n    else if (next && event.target.value.length > 0 && this.otp.length < 4) {\n\n\n      if (this.otp.length == 3) {\n        this.otp = this.otp + event.target.value\n        next.setFocus();\n      }\n      else if (this.otp.length < 3) {\n        this.otp = this.otp + event.target.value\n        next.setFocus();\n      }\n\n    }\n    else {\n      return 0;\n    }\n\n  }\n}\n"],"sourceRoot":"webpack:///"}