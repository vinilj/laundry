{"version":3,"sources":["webpack:///src/app/registration/otp/otp.page.html","webpack:///src/app/registration/otp/otp-routing.module.ts","webpack:///src/app/registration/otp/otp.module.ts","webpack:///src/app/registration/otp/otp.page.scss","webpack:///src/app/registration/otp/otp.page.ts"],"names":["routes","path","component","OtpPageRoutingModule","imports","forChild","exports","OtpPageModule","declarations","OtpPage","navctrl","toasterService","route","router","userService","localStorage","otp","queryParams","subscribe","params","console","log","phoneNumber","JSON","parse","length","toastFail","userLogin","mobile","String","parseInt","res","userType","setStorageKey","then","navigateToLandingPage","navigationExtras","navigateForward","getUserData","getUserDataById","id","user","resendOTP","toastSuccess","event","next","prev","target","value","substring","setFocus","selector","template"],"mappings":"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","file":"registration-otp-otp-module-es5.js","sourcesContent":["export default \"<ion-content>\\n  <ion-grid class=\\\"input-position\\\">\\n    <ion-row>\\n      <ion-col>\\n        <h2>OTP Verfication</h2>\\n        <h5 class=\\\"color-gray thin-font ion-no-margin\\\">Enter the OTP sent to +91 {{phoneNumber}}</h5>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row>\\n      <ion-col class=\\\"partitioned\\\">\\n        <ion-input #otp1 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp2,'otp')\\\">\\n        </ion-input>\\n        <ion-input #otp2 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp3,otp1)\\\">\\n        </ion-input>\\n        <ion-input #otp3 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,otp4,otp2)\\\">\\n        </ion-input>\\n        <ion-input #otp4 required type=\\\"tel\\\" maxlength=\\\"1\\\" (keyup)=\\\"otpController($event,'otp',otp3)\\\">\\n        </ion-input>\\n      </ion-col>\\n    </ion-row>\\n    <ion-button expand=\\\"block\\\" color=\\\"primary\\\" (click)=\\\"submit()\\\">Submit</ion-button>\\n    <h5 class=\\\"color-gray thin-font text-right\\\">Didn't get OTP ?\\n      <strong class=\\\"primary-color\\\" (click)=\\\"resendOtp()\\\">Resend OTP</strong>\\n      <ion-ripple-effect></ion-ripple-effect>\\n    </h5>\\n\\n\\n  </ion-grid>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OtpPage } from './otp.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OtpPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OtpPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OtpPageRoutingModule } from './otp-routing.module';\n\nimport { OtpPage } from './otp.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OtpPageRoutingModule,\n  ],\n  declarations: [OtpPage]\n})\nexport class OtpPageModule {}\n","export default \".partitioned ion-input {\\n  display: inline-block;\\n  width: 18%;\\n  margin: 1em 3%;\\n  border: 1px solid #787878;\\n  box-sizing: border-box;\\n  border-radius: 5px;\\n  text-align: center;\\n  padding-right: 8px !important;\\n  --padding-top: 12px;\\n  --padding-bottom: 12px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0cmF0aW9uL290cC9EOlxcUHJvamVjdHNcXGxhdW5kcnlcXGFwcC9zcmNcXGFwcFxccmVnaXN0cmF0aW9uXFxvdHBcXG90cC5wYWdlLnNjc3MiLCJzcmMvYXBwL3JlZ2lzdHJhdGlvbi9vdHAvb3RwLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLHFCQUFBO0VBQ0EsVUFBQTtFQUNBLGNBQUE7RUFDQSx5QkFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLDZCQUFBO0VBQ0EsbUJBQUE7RUFDQSxzQkFBQTtBQ0FKIiwiZmlsZSI6InNyYy9hcHAvcmVnaXN0cmF0aW9uL290cC9vdHAucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBhcnRpdGlvbmVkIHtcbiAgaW9uLWlucHV0IHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDE4JTtcbiAgICBtYXJnaW46IDFlbSAzJTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjNzg3ODc4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nLXJpZ2h0OiA4cHggIWltcG9ydGFudDtcbiAgICAtLXBhZGRpbmctdG9wOiAxMnB4O1xuICAgIC0tcGFkZGluZy1ib3R0b206IDEycHg7XG4gIH1cbiBcbn1cbiIsIi5wYXJ0aXRpb25lZCBpb24taW5wdXQge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiAxOCU7XG4gIG1hcmdpbjogMWVtIDMlO1xuICBib3JkZXI6IDFweCBzb2xpZCAjNzg3ODc4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZy1yaWdodDogOHB4ICFpbXBvcnRhbnQ7XG4gIC0tcGFkZGluZy10b3A6IDEycHg7XG4gIC0tcGFkZGluZy1ib3R0b206IDEycHg7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { UserapiService } from 'src/app/common/apilayer/APIs/userapi.service';\nimport { LocalStroageService } from 'src/app/common/service/localstorage/local-stroage.service';\nimport { HttpService } from 'src/app/common/apilayer/http-header/http.service';\nimport { ToastService } from 'src/app/common/service/toast/toast.service';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport * as jwt_decode from 'jwt-decode'\n\n@Component({\n  selector: 'app-otp',\n  templateUrl: './otp.page.html',\n  styleUrls: ['./otp.page.scss'],\n})\nexport class OtpPage implements OnInit {\n\n  otp: string = '';\n  phoneNumber: any;\n  user: any;\n\n\n\n\n  constructor(private navctrl: NavController, private toasterService: ToastService,\n    private route: ActivatedRoute, private router: Router,\n    private userService: UserapiService, private localStorage: LocalStroageService) {\n    this.route.queryParams.subscribe(params => {\n      console.log(params);\n\n      if (params && params.phoneNumber) {\n        this.phoneNumber = JSON.parse(params.phoneNumber);\n      }\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  submit() {\n\n    console.log(this.otp);\n\n    if (this.otp.length < 4)\n      this.toasterService.toastFail('Please enter the otp')\n    else\n      this.userService.userLogin({\n        mobile: String(this.phoneNumber),\n        otp: parseInt(this.otp)\n      })\n        .subscribe(res => {\n          if (res.userType == \"found\") {\n\n            this.localStorage.setStorageKey('authToken', res['token'])\n              .then(() => {\n                // if (jwt_decode(res['token'])['userType'] == 'user') {\n                //   this.navctrl.navigateForward('storelist')\n                //   console.log(jwt_decode(res['token'])['userType']);\n                // } else\n                this.navigateToLandingPage()\n\n              })\n\n          }\n          else if (res.userType == \"notfound\") {\n            let navigationExtras: NavigationExtras = {\n              queryParams: {\n                phoneNumber: this.phoneNumber\n              }\n            };\n            this.navctrl.navigateForward('userdetails', navigationExtras)\n          } else if (res.userType == \"storeoperator\") {\n            let navigationExtras: NavigationExtras = {\n              queryParams: {\n                phoneNumber: this.phoneNumber\n              }\n            };\n            this.navctrl.navigateForward('storelist', navigationExtras)\n          }\n\n        })\n\n\n  }\n  navigateToLandingPage() {\n    this.userService.getUserData()\n      .subscribe(res => {\n        // this.user = res\n        // console.log(res);\n        this.userService.getUserDataById(res.id)\n          .subscribe(res => {\n            this.user = res\n            this.localStorage.setStorageKey('user', res)\n              .then(() => {\n                if (res.userType == \"storeoperator\")\n                  this.navctrl.navigateForward('/storelist')\n                else\n                  this.navctrl.navigateForward('tabs/welcome')\n              })\n          })\n      })\n  }\n\n  resendOtp() {\n    this.otp = \"\"\n    this.userService.resendOTP({\n      mobile: String(this.phoneNumber),\n    }).subscribe(res => {\n      console.log(res);\n      this.toasterService.toastSuccess('Otp resent')\n    })\n  }\n  otpController(event, next, prev) {\n    console.log(event.target.value.length, \" next:\", next, \" prev:\", prev, \" otp:\", this.otp.length);\n\n    if (event.target.value.length < 1 && prev) {\n      if (this.otp.length == 0)\n        this.otp = \"\"\n      else if (this.otp.length == 1) {\n        this.otp = this.otp.substring(0, this.otp.length - 1);\n      }\n      else {\n        prev.setFocus()\n        this.otp = this.otp.substring(0, this.otp.length - 1);\n      }\n\n\n    }\n    else if (next && event.target.value.length > 0 && this.otp.length < 4) {\n\n\n      if (this.otp.length == 3) {\n        this.otp = this.otp + event.target.value\n        next.setFocus();\n      }\n      else if (this.otp.length < 3) {\n        this.otp = this.otp + event.target.value\n        next.setFocus();\n      }\n\n    }\n    else {\n      return 0;\n    }\n\n  }\n}\n"]}