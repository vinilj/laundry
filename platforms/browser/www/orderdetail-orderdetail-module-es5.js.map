{"version":3,"sources":["webpack:///src/app/tabs/orderdetail/orderdetail.page.html","webpack:///src/app/tabs/orderdetail/orderdetail.module.ts","webpack:///src/app/tabs/orderdetail/orderdetail.page.scss","webpack:///src/app/tabs/orderdetail/orderdetail.page.ts"],"names":["OrderdetailPageModule","imports","forChild","path","component","declarations","OrderdetailPage","orderService","route","userService","router","paymentService","toast","currencyIcon","currency","paymentAmount","razor_key","event","setTimeout","ngOnInit","target","complete","queryParams","subscribe","params","console","log","id","orderId","JSON","parse","getOrderDetails","getUserData","res","user","getOrderById","orderDetail","email","contact","mobile","name","amount","options","description","image","key","prefill","theme","color","modal","ondismiss","alert","RazorpayCheckout","open","val","successCallback","err","cancelCallback","payment_id","payload","paymentStatus","updateOrder","toastSuccess","error","toastFail","selector","template"],"mappings":"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","file":"orderdetail-orderdetail-module-es5.js","sourcesContent":["export default \"<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content pullingIcon=\\\"arrow-dropdown\\\" pullingText=\\\"Pull to refresh\\\" refreshingSpinner=\\\"circles\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-grid>\\n    <h1>Promising Quality</h1>\\n    <h5 class=\\\"ion-no-margin\\\">10 years Industry trust</h5>\\n\\n\\n    <ion-card style=\\\"margin-top: 11em;\\\" *ngIf=\\\"orderDetail\\\">\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n\\n          <h4 class=\\\"card-heading ion-no-margin\\\"><span class=\\\"thin-font\\\">Wash type:\\n            </span>{{orderDetail.opertationType}}</h4>\\n          <h4 class=\\\"ion-no-margin\\\">Order ID: 64090909{{orderDetail.id}}</h4>\\n          <h4 class=\\\"thin-font ion-no-margin\\\">Marathahalli outlet</h4>\\n          <h4 class=\\\"thin-font ion-no-margin\\\" style=\\\"margin-bottom: 1em;\\\">{{orderDetail.startTime | dateTime}}</h4>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"btn-row-gray\\\">\\n        <ion-button expand=\\\"full\\\">Estimated time</ion-button>\\n        <ion-button expand=\\\"full\\\">30 Minutes</ion-button>\\n      </ion-row>\\n    </ion-card>\\n\\n\\n    <ion-card class=\\\"\\\" *ngIf=\\\"orderDetail\\\">\\n      <ion-row>\\n        <ion-col size=\\\"12\\\">\\n\\n          <h4 style=\\\"margin-bottom: 1em;\\\"><span class=\\\"thin-font \\\">Amount to be paid: </span>\\n            <span class=\\\"ion-float-right\\\">\\n              {{orderDetail.amount}} INR\\n            </span> </h4>\\n\\n        </ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"btn-row\\\">\\n        <ion-button expand=\\\"full\\\" color=\\\"primary\\\"></ion-button>\\n        <ion-button expand=\\\"full\\\" color=\\\"primary\\\" [disabled]=\\\"orderDetail.opertationType == 'drop off' && orderDetail.orderStatus==''\\\" *ngIf=\\\"orderDetail.paymentStatus == 'due'\\\"\\n          (click)='pay()'>Pay\\n        </ion-button>\\n        <ion-button expand=\\\"full\\\" color=\\\"primary\\\" *ngIf=\\\"orderDetail.paymentStatus == 'paid'\\\">Paid</ion-button>\\n      </ion-row>\\n    </ion-card>\\n  </ion-grid>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OrderdetailPage } from './orderdetail.page';\nimport { RouterModule } from '@angular/router';\nimport { PipesModule } from 'src/app/common/service/pipe/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild([{ path: '', component: OrderdetailPage }])\n  ],\n  declarations: [OrderdetailPage]\n})\nexport class OrderdetailPageModule {}\n","export default \".btn-row {\\n  margin: 0 -10px;\\n  background: var(--ion-color-primary);\\n}\\n.btn-row ion-button {\\n  --background: none;\\n  width: 48%;\\n  --box-shadow: none;\\n}\\n.btn-row-gray {\\n  margin: 0 -10px;\\n  background: #e5e5e5;\\n}\\n.btn-row-gray ion-button {\\n  --background: none;\\n  width: 48%;\\n  --box-shadow: none;\\n  color: black;\\n}\\nh1 {\\n  font-weight: 900;\\n  font-size: 4em;\\n  color: #e5e5e5;\\n}\\nh5 {\\n  margin: 0;\\n}\\n.thin-font {\\n  font-weight: 500;\\n}\\n.card-heading {\\n  margin: 1em 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFicy9vcmRlcmRldGFpbC9EOlxcUHJvamVjdHNcXGxhdW5kcnlcXGFwcC9zcmNcXGFwcFxcdGFic1xcb3JkZXJkZXRhaWxcXG9yZGVyZGV0YWlsLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdGFicy9vcmRlcmRldGFpbC9vcmRlcmRldGFpbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0VBQ0Esb0NBQUE7QUNDRjtBREFFO0VBQ0Usa0JBQUE7RUFDQSxVQUFBO0VBQ0Esa0JBQUE7QUNFSjtBRENBO0VBQ0UsZUFBQTtFQUVBLG1CQUFBO0FDQ0Y7QURBRTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtBQ0VKO0FEQ0E7RUFDSSxnQkFBQTtFQUNBLGNBQUE7RUFDQSxjQUFBO0FDRUo7QURBQTtFQUNFLFNBQUE7QUNHRjtBRERBO0VBQ0UsZ0JBQUE7QUNJRjtBREZBO0VBQ0ksYUFBQTtBQ0tKIiwiZmlsZSI6InNyYy9hcHAvdGFicy9vcmRlcmRldGFpbC9vcmRlcmRldGFpbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLXJvdyB7XG4gIG1hcmdpbjogMCAtMTBweDtcbiAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICBpb24tYnV0dG9uIHtcbiAgICAtLWJhY2tncm91bmQ6IG5vbmU7XG4gICAgd2lkdGg6IDQ4JTtcbiAgICAtLWJveC1zaGFkb3c6IG5vbmU7XG4gIH1cbn1cbi5idG4tcm93LWdyYXkge1xuICBtYXJnaW46IDAgLTEwcHg7XG4gIC8vIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbiAgYmFja2dyb3VuZDogI2U1ZTVlNTtcbiAgaW9uLWJ1dHRvbiB7XG4gICAgLS1iYWNrZ3JvdW5kOiBub25lO1xuICAgIHdpZHRoOiA0OCU7XG4gICAgLS1ib3gtc2hhZG93OiBub25lO1xuICAgIGNvbG9yOiBibGFjaztcbiAgfVxufVxuaDEge1xuICAgIGZvbnQtd2VpZ2h0OiA5MDA7XG4gICAgZm9udC1zaXplOiA0ZW07XG4gICAgY29sb3I6ICNlNWU1ZTU7XG59XG5oNSB7XG4gIG1hcmdpbjogMDtcbn1cbi50aGluLWZvbnQge1xuICBmb250LXdlaWdodDogNTAwO1xufVxuLmNhcmQtaGVhZGluZ3tcbiAgICBtYXJnaW46IDFlbSAwO1xufSIsIi5idG4tcm93IHtcbiAgbWFyZ2luOiAwIC0xMHB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG59XG4uYnRuLXJvdyBpb24tYnV0dG9uIHtcbiAgLS1iYWNrZ3JvdW5kOiBub25lO1xuICB3aWR0aDogNDglO1xuICAtLWJveC1zaGFkb3c6IG5vbmU7XG59XG5cbi5idG4tcm93LWdyYXkge1xuICBtYXJnaW46IDAgLTEwcHg7XG4gIGJhY2tncm91bmQ6ICNlNWU1ZTU7XG59XG4uYnRuLXJvdy1ncmF5IGlvbi1idXR0b24ge1xuICAtLWJhY2tncm91bmQ6IG5vbmU7XG4gIHdpZHRoOiA0OCU7XG4gIC0tYm94LXNoYWRvdzogbm9uZTtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG5oMSB7XG4gIGZvbnQtd2VpZ2h0OiA5MDA7XG4gIGZvbnQtc2l6ZTogNGVtO1xuICBjb2xvcjogI2U1ZTVlNTtcbn1cblxuaDUge1xuICBtYXJnaW46IDA7XG59XG5cbi50aGluLWZvbnQge1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uY2FyZC1oZWFkaW5nIHtcbiAgbWFyZ2luOiAxZW0gMDtcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\nimport { OrderapiService } from 'src/app/common/apilayer/APIs/orderapi.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PaymentService } from 'src/app/common/service/payment/payment.service';\nimport { ToastService } from 'src/app/common/service/toast/toast.service';\nimport { UserapiService } from 'src/app/common/apilayer/APIs/userapi.service';\ndeclare var RazorpayCheckout: any;\n\n\n@Component({\n  selector: 'app-orderdetail',\n  templateUrl: './orderdetail.page.html',\n  styleUrls: ['./orderdetail.page.scss'],\n})\nexport class OrderdetailPage implements OnInit {\n  orderId: any;\n  orderDetail: any;\n  currencyIcon: string = 'â‚¹';\n  currency: string = 'INR';\n  paymentAmount: number = 1600;\n  // // testKey\n  // razor_key: string = 'rzp_test_rRvE0JzWWGkqh1';\n\n  //Live Key\n  razor_key: string = 'rzp_live_1FMhHw7pwKiV36';\n  user: any;\n\n\n  constructor(private orderService: OrderapiService, private route: ActivatedRoute, private userService: UserapiService,\n    private router: Router, private paymentService: PaymentService, private toast: ToastService, ) {\n\n  }\n\n  doRefresh(event) {\n    setTimeout(() => {\n      this.ngOnInit()\n      event.target.complete();\n    }, 1000);\n  }\n  ngOnInit() {\n\n  }\n\n  ionViewWillEnter() {\n    this.route.queryParams.subscribe(params => {\n      console.log(params);\n\n      if (params && params.id) {\n        this.orderId = JSON.parse(params.id);\n        this.getOrderDetails()\n      }\n      this.userService.getUserData()\n        .subscribe(res => { this.user = res; console.log(res) })\n    });\n  }\n\n  getOrderDetails() {\n    console.log(this.orderId);\n\n    if (this.orderId)\n      this.orderService.getOrderById(this.orderId)\n        .subscribe(res => {\n          console.log(res)\n          this.orderDetail = res\n        })\n  }\n\n  pay() {\n    let user = {\n      email: this.user.email,\n      contact: this.user.mobile,\n      name: this.user.name,\n      amount: this.orderDetail.amount\n    }\n\n\n    var options = {\n      description: 'Credits towards consultation',\n      image: 'https://i.imgur.com/3g7nmJC.png',\n      currency: this.currency, // your 3 letter currency code\n      key: this.razor_key, // your Key Id from Razorpay dashboard\n      amount: user.amount * 100, // Payment amount in smallest denomiation e.g. cents for USD\n      name: 'Coin Laundry',\n      prefill: {\n        email: user.email,\n        contact: user.contact,\n        name: user.name\n      },\n      theme: {\n        color: '#642E58'\n        // color: '#00000'\n      },\n      modal: {\n        ondismiss: function () {\n          alert('dismissed')\n        }\n      }\n    };\n\n\n    RazorpayCheckout.open(options, (val) => this.successCallback(val), (err) => this.cancelCallback(err));\n\n\n  }\n\n\n\n  successCallback(payment_id) {\n    console.log('payment_id: ' + payment_id);\n    // alert('payment_id: ' + payment_id);\n    let payload = {\n      id: this.orderId,\n      paymentStatus: 'paid'\n    }\n    this.orderService.updateOrder(payload)\n      .subscribe(res => console.log(res))\n    this.toast.toastSuccess('Payment Successful');\n  };\n\n  cancelCallback(error) {\n    this.toast.toastFail('Payment Failed');\n    // alert(error.description + ' (Error ' + error.code + ')');\n  };\n}\n"]}